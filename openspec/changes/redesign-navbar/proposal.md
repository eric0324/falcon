# Proposal: 側邊欄 + 極簡頂部導航重新設計

## 概述

將現有的傳統頂部導航列重新設計為類似 ChatGPT 的現代化介面：左側可摺疊側邊欄 + 極簡頂部欄。

## 動機

- 現有的頂部導航設計較為傳統，與現代 LLM 工具（如 ChatGPT、Claude.ai）的設計風格不一致
- 對話歷史目前只在首頁顯示，使用者無法在其他頁面快速切換對話
- 缺乏側邊欄導航，空間利用效率較低

## 目標

1. 建立可摺疊的左側側邊欄，包含導航項目和對話歷史
2. 簡化頂部欄，只保留 Logo、使用者選單、新對話按鈕
3. 支援響應式設計，行動裝置可收合側邊欄
4. 統一所有頁面的導航體驗

## 非目標

- 不改變現有的路由結構
- 不改變認證邏輯
- 不改變市集或 Studio 的核心功能

## 設計方案

### 新架構

```
┌─────────────────────────────────────────────────────┐
│ [≡]  Logo            [+ 新對話]  [使用者頭像 ▼]     │ ← 頂部欄
├──────────┬──────────────────────────────────────────┤
│ 導航     │                                          │
│ ─────    │                                          │
│ 探索市集 │                                          │
│ 我的工具 │            主要內容區                     │
│          │                                          │
│ 對話歷史 │                                          │
│ ─────    │                                          │
│ 對話 1   │                                          │
│ 對話 2   │                                          │
│ 對話 3   │                                          │
│ ...      │                                          │
└──────────┴──────────────────────────────────────────┘
  ↑ 側邊欄（可摺疊）
```

### 元件拆分

| 元件 | 說明 |
|------|------|
| `AppShell` | 整體佈局容器，管理側邊欄狀態 |
| `Sidebar` | 左側側邊欄，包含導航和對話歷史 |
| `TopBar` | 極簡頂部欄 |
| `SidebarToggle` | 側邊欄展開/收合按鈕 |
| `ConversationList` | 對話歷史列表 |

### 側邊欄行為

- **展開狀態**：顯示完整導航項目和對話歷史
- **收合狀態**：只顯示圖標
- **行動裝置**：預設收合，點擊 toggle 時以 overlay 形式展開
- **狀態持久化**：記住使用者的展開/收合偏好（localStorage）

## 影響範圍

### 需修改的檔案

- `src/components/navbar.tsx` → 移除或重構
- `src/app/layout.tsx` → 整合新的 AppShell
- `src/app/page.tsx` → 移除 Navbar 引用
- `src/app/marketplace/page.tsx` → 移除 Navbar 引用
- 所有使用 Navbar 的頁面

### 新增的檔案

- `src/components/app-shell.tsx`
- `src/components/sidebar.tsx`
- `src/components/top-bar.tsx`
- `src/components/conversation-list.tsx`

## 風險

| 風險 | 緩解措施 |
|------|----------|
| 破壞現有頁面佈局 | 漸進式重構，保持 layout 穩定 |
| 響應式設計複雜度 | 先實作桌面版，再處理行動版 |
| 對話列表效能 | 使用虛擬滾動或分頁載入 |

## 驗收標準

1. 側邊欄可正常展開/收合
2. 導航項目（探索市集、我的工具）可正常運作
3. 對話歷史可正常顯示和點擊跳轉
4. 新對話按鈕可正常運作
5. 使用者選單可正常運作
6. 行動裝置可正常使用
7. 所有現有測試通過
